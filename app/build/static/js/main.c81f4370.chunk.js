(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c=n(24),r=n.n(c),o=n(3),a=n(0),s=n(6),i=n(2),u=n(1),l=function(e){var t,n=e.notes;console.log(n);var c=Object(i.g)().noteId;console.log(c);var r=n.find((function(e){return e.id===c}));return r?(console.log(r),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:r.content}),Object(u.jsx)("div",{children:null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.name}),Object(u.jsx)("div",{children:Object(u.jsx)("strong",{children:r.important?"important":"not important"})})]})):null},j=n(11),b=Object(a.forwardRef)((function(e,t){var n=e.children,c=e.buttonLabel,r=Object(a.useState)(!1),s=Object(o.a)(r,2),i=s[0],l=s[1],j={display:i?"none":""},b={display:i?"":"none"},d=function(){return l(!i)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:d}})),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:j,children:Object(u.jsx)("button",{className:"todo",onClick:d,children:c})}),Object(u.jsxs)("div",{style:b,children:[n,Object(u.jsx)("button",{onClick:d,children:"Cancel"})]})]})}));b.displayName="Toggleable";var d=b,O=n(14),h=n.n(O),f=["username","password","handleLoginSubmit"];function g(e){var t=e.username,n=e.password,c=e.handleLoginSubmit,r=Object(j.a)(e,f);return Object(u.jsx)(d,{buttonLabel:"Show login",children:Object(u.jsxs)("form",{onSubmit:c,children:[Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"text",value:t,name:"Username",placeholder:"Username",onChange:r.handleUsernameChange})}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"password",value:n,name:"password",placeholder:"Password",onChange:r.handlePasswordChange})}),Object(u.jsx)("button",{id:"form-login-button",children:"Login"})]})})}g.prototypes={handleLoginSubmit:h.a.func.isRequired,username:h.a.string};var p=n(15),m=n.n(p),x=n(25),v=n(7),S=n.n(v),w=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/api/login",t);case 2:return n=e.sent,c=n.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={login:w},C="/api/notes",N=null,k=function(){return S.a.get(C).then((function(e){return e.data}))},I=function(e){var t={headers:{Authorization:N}};return S.a.post(C,e,t).then((function(e){return e.data}))},L=function(e,t){var n={headers:{Authorization:N}};return S.a.put("".concat(C,"/").concat(e),t,n).then((function(e){return e.data}))},U=function(e){N="Bearer ".concat(e)},A=function(e){var t=e.message;return null===t?null:Object(u.jsx)("div",{className:"error",children:t})},P=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(o.a)(r,2),i=s[0],l=s[1],j=Object(a.useState)(null),b=Object(o.a)(j,2),d=b[0],O=b[1],h=Object(a.useState)(null),f=Object(o.a)(h,2),p=f[0],m=f[1];console.log(d),console.log(p);return d?Object(u.jsx)("h2",{children:"user logged"}):Object(u.jsxs)("div",{children:[Object(u.jsx)(A,{message:p}),Object(u.jsx)(g,{username:n,password:i,handleLoginSubmit:function(e){e.preventDefault(),y.login({username:n,password:i}).then((function(e){window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(e)),U(e.token),O(e),c(""),l("")})).catch((function(){m("Wrong credentials"),c(""),l(""),setTimeout((function(){m(null)}),5e3)}))},handlePasswordChange:function(e){l(e.target.value)},handleUsernameChange:function(e){c(e.target.value)}})]})},J=n(12);function E(e){var t=e.addNote,n=Object(a.useState)(""),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useRef)();return Object(u.jsxs)(d,{buttonLabel:"New Note",ref:i,children:[Object(u.jsx)("h3",{children:"Create a new note"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({content:r,important:!1}),s(""),i.current.toggleVisibility()},children:[Object(u.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},value:r,placeholder:"Write your note content"}),Object(u.jsx)("button",{children:"Crear nota"})]})]})}var D=["content","important","toggleImportance"];function H(e){var t=e.content,n=e.important,c=e.toggleImportance,r=Object(j.a)(e,D),o=n?"make not important":"make important";return Object(u.jsxs)("li",{children:[Object(u.jsx)(s.b,{to:"/notes/".concat(r.id),children:t}),Object(u.jsx)("small",{children:Object(u.jsx)("strong",{children:String(n)})}),Object(u.jsx)("button",{onClick:c,children:o})]})}n(52);var R=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(o.a)(r,2),i=s[0],l=s[1],j=Object(a.useState)(null),b=Object(o.a)(j,2),d=b[0],O=b[1],h=Object(a.useState)(""),f=Object(o.a)(h,2),p=f[0],m=f[1],x=Object(a.useState)(""),v=Object(o.a)(x,2),S=v[0],w=v[1],C=Object(a.useState)(null),N=Object(o.a)(C,2),P=N[0],D=N[1];Object(a.useEffect)((function(){l(!0),k().then((function(e){c(e),l(!1)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteAppUser");if(e){var t=JSON.parse(e);D(t),U(t.token)}}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Notes"}),i?"cargando...":"",Object(u.jsx)(A,{message:d}),P?Object(u.jsx)("button",{onClick:function(){window.localStorage.removeItem("loggedNoteAppUser"),D(null),U(P.token)},children:"Logout"}):null,P?Object(u.jsx)(E,{addNote:function(e){I(e).then((function(e){c((function(t){return t.concat(e)}))})).catch((function(e){console.error(e),O("La API fallo")}))}}):Object(u.jsx)(g,{username:p,password:S,handleLoginSubmit:function(e){e.preventDefault(),y.login({username:p,password:S}).then((function(e){window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(e)),U(e.token),D(e),m(""),w("")})).catch((function(){O("Wrong credentials"),m(""),w(""),setTimeout((function(){O(null)}),5e3)}))},handleUsernameChange:function(e){var t=e.target;return m(t.value)},handlePasswordChange:function(e){var t=e.target;return w(t.value)}}),Object(u.jsx)("ol",{children:n.map((function(e){return Object(u.jsx)(H,Object(J.a)({toggleImportance:function(){return function(e){var t=n.find((function(t){return t.id===e})),r=Object(J.a)(Object(J.a)({},t),{},{important:!t.important});L(e,r).then((function(t){c(n.map((function(n){return n.id!==e?n:t})))}))}(e.id)}},e),e.id)}))})]})},T=function(){return Object(u.jsx)("h1",{children:"Home Page"})},W=function(){return Object(u.jsx)("h1",{children:"Users"})},z={padding:5},B=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){k().then((function(e){c(e)}))}),[]),Object(u.jsxs)(s.a,{children:[Object(u.jsxs)("header",{children:[Object(u.jsx)(s.b,{to:"/",style:z,children:"Home"}),Object(u.jsx)(s.b,{to:"/notes",style:z,children:"Notes"}),Object(u.jsx)(s.b,{to:"/users",style:z,children:"Users"}),Object(u.jsx)(s.b,{to:"/login",style:z,children:"Login"})]}),Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{path:"/notes/:noteId",element:Object(u.jsx)(l,{notes:n})}),Object(u.jsx)(i.a,{path:"/",element:Object(u.jsx)(T,{})}),Object(u.jsx)(i.a,{path:"/notes",element:Object(u.jsx)(R,{})}),Object(u.jsx)(i.a,{path:"/users",element:Object(u.jsx)(W,{})}),Object(u.jsx)(i.a,{path:"/login",element:Object(u.jsx)(P,{})}),Object(u.jsx)(i.a,{path:"/*",element:Object(u.jsx)("h1",{children:"no disponible"})})]})]})};r.a.render(Object(u.jsx)(B,{}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.c81f4370.chunk.js.map