(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var o=n(24),r=n.n(o),c=n(2),a=n(7),s=n(0),i=function(e){var t,n=e.notes;console.log(n);var o=Object(c.h)().noteId;console.log(o);var r=n.find((function(e){return e.id===o}));return r?(console.log(r),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:r.content}),Object(s.jsx)("div",{children:null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.name}),Object(s.jsx)("div",{children:Object(s.jsx)("strong",{children:r.important?"important":"not important"})})]})):null},u=n(3),l=n(1),j=n(6),b=n(12),d=Object(l.forwardRef)((function(e,t){var n=e.children,o=e.buttonLabel,r=Object(l.useState)(!1),c=Object(u.a)(r,2),a=c[0],i=c[1],j={display:a?"none":""},b={display:a?"":"none"},d=function(){return i(!a)};return Object(l.useImperativeHandle)(t,(function(){return{toggleVisibility:d}})),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{style:j,children:Object(s.jsx)("button",{className:"todo",onClick:d,children:o})}),Object(s.jsxs)("div",{style:b,children:[n,Object(s.jsx)("button",{onClick:d,children:"Cancel"})]})]})}));d.displayName="Toggleable";var O=d,h=n(14),f=n.n(h),g=["username","password","handleLoginSubmit"];function p(e){var t=e.username,n=e.password,o=e.handleLoginSubmit;Object(b.a)(e,g);return Object(s.jsx)(O,{buttonLabel:"Show login",children:Object(s.jsxs)("form",{onSubmit:o,children:[Object(s.jsx)("div",{children:Object(s.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{name:"Username",placeholder:"Username"}))}),Object(s.jsx)("div",{children:Object(s.jsx)("input",Object(j.a)(Object(j.a)({},n),{},{name:"password",placeholder:"Password"}))}),Object(s.jsx)("button",{id:"form-login-button",children:"Login"})]})})}p.prototypes={handleLoginSubmit:f.a.func.isRequired,username:f.a.string};var m=n(15),x=n.n(m),v=n(25),w=n(8),S=n.n(w),y=function(){var e=Object(v.a)(x.a.mark((function e(t){var n,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/api/login",t);case 2:return n=e.sent,o=n.data,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N={login:y},I="/api/notes",k=null,L=function(){return S.a.get(I).then((function(e){return e.data}))},C=function(e){var t={headers:{Authorization:k}};return S.a.post(I,e,t).then((function(e){return e.data}))},U=function(e,t){var n={headers:{Authorization:k}};return S.a.put("".concat(I,"/").concat(e),t,n).then((function(e){return e.data}))},A=function(e){k="Bearer ".concat(e)},J=function(e){var t=e.message;return null===t?null:Object(s.jsx)("div",{className:"error",children:t})},P=function(e){var t=e.type,n=Object(l.useState)(""),o=Object(u.a)(n,2),r=o[0],c=o[1];return{type:t,value:r,onChange:function(e){c(e.target.value),console.log(e.target.value)}}};function D(){var e=P({type:"text"}),t=P({type:"password"}),n=Object(c.g)(),o=Object(l.useState)(null),r=Object(u.a)(o,2),a=r[0],i=r[1],j=Object(l.useState)(null),b=Object(u.a)(j,2),d=b[0],O=b[1];return a?Object(s.jsx)("h2",{children:"user logged"}):Object(s.jsxs)("div",{children:[Object(s.jsx)(J,{message:d}),Object(s.jsx)(p,{username:e,password:t,handleLoginSubmit:function(o){o.preventDefault();var r=e.value,c=t.value;console.log("estoy en el submit"),console.log("value",r),console.log("value",c),N.login({username:r,password:c}).then((function(e){console.log("paso aca"),window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(e)),A(e.token),i(e),n("/notes")})).catch((function(){O("Wrong credentials"),setTimeout((function(){O(null)}),5e3)}))}})]})}function E(e){var t=e.addNote,n=Object(l.useState)(""),o=Object(u.a)(n,2),r=o[0],c=o[1],a=Object(l.useRef)();return Object(s.jsxs)(O,{buttonLabel:"New Note",ref:a,children:[Object(s.jsx)("h3",{children:"Create a new note"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({content:r,important:!1}),c(""),a.current.toggleVisibility()},children:[Object(s.jsx)("input",{type:"text",onChange:function(e){c(e.target.value)},value:r,placeholder:"Write your note content"}),Object(s.jsx)("button",{children:"Crear nota"})]})]})}var H=["content","important","toggleImportance"];function R(e){var t=e.content,n=e.important,o=e.toggleImportance,r=Object(b.a)(e,H),c=n?"make not important":"make important";return Object(s.jsxs)("li",{children:[Object(s.jsx)(a.b,{to:"/notes/".concat(r.id),children:t}),Object(s.jsx)("small",{children:Object(s.jsx)("strong",{children:String(n)})}),Object(s.jsx)("button",{onClick:o,children:c})]})}n(52);var T=function(){var e=Object(l.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1];Object(l.useEffect)((function(){L().then((function(e){o(e)}))}),[]);return{notes:n,addNote:function(e){return C(e).then((function(e){o((function(t){return t.concat(e)}))}))},setNotes:o,toggleImportanceOf:function(e){var t=n.find((function(t){return t.id===e})),r=Object(j.a)(Object(j.a)({},t),{},{important:!t.important});return U(e,r).then((function(t){o(n.map((function(n){return n.id!==e?n:t})))}))}}},W=function(){var e=Object(l.useState)(null),t=Object(u.a)(e,2),n=t[0],o=t[1];Object(l.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteAppUser");if(e){var t=JSON.parse(e);o(t),A(t.token)}}),[]);return{user:n,logout:function(){window.localStorage.removeItem("loggedNoteAppUser"),o(null),A(n.token)},login:function(e){var t=e.username,n=e.password;return N.login({username:t,password:n}).then((function(e){window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(e)),A(e.token),o(e)}))}}},z=function(){var e=T(),t=e.notes,n=e.addNote,o=e.toggleImportanceOf,r=W(),c=r.user,a=r.logout,i=r.login,b=Object(l.useState)(null),d=Object(u.a)(b,2),O=d[0],h=d[1],f=Object(l.useState)(""),g=Object(u.a)(f,2),m=g[0],x=g[1],v=Object(l.useState)(""),w=Object(u.a)(v,2),S=w[0],y=w[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Notes"}),Object(s.jsx)(J,{message:O}),c?Object(s.jsx)("button",{onClick:a,children:"Logout"}):null,c?Object(s.jsx)(E,{addNote:function(e){n(e).catch((function(e){console.error(e),h("La API fallo")}))}}):Object(s.jsx)(p,{username:m,password:S,handleLoginSubmit:function(e){e.preventDefault(),i({username:m,password:S}).then((function(){x(""),y("")})).catch((function(){h("Wrong credentials"),x(""),y(""),setTimeout((function(){h(null)}),5e3)}))},handleUsernameChange:function(e){var t=e.target;return x(t.value)},handlePasswordChange:function(e){var t=e.target;return y(t.value)}}),Object(s.jsx)("ol",{children:t.map((function(e){return Object(s.jsx)(R,Object(j.a)({toggleImportance:function(){return t=e.id,void o(t).catch((function(){h("Note was already removed from server")}));var t}},e),e.id)}))})]})},B=function(){return Object(s.jsx)("h1",{children:"Home Page"})},V=function(){return Object(s.jsx)("h1",{children:"Users"})},q={padding:5},F=function(){var e=W().user,t=T().notes,n=function(){return e?Object(s.jsx)(c.a,{to:"/"}):Object(s.jsx)(D,{})};return Object(s.jsxs)(a.a,{children:[Object(s.jsxs)("header",{children:[Object(s.jsx)(a.b,{to:"/",style:q,children:"Home"}),Object(s.jsx)(a.b,{to:"/notes",style:q,children:"Notes"}),Object(s.jsx)(a.b,{to:"/users",style:q,children:"Users"}),e?Object(s.jsxs)("em",{children:["Logged as ",e.name]}):Object(s.jsx)(a.b,{to:"/login",style:q,children:"Login"})]}),Object(s.jsxs)(c.d,{children:[Object(s.jsx)(c.b,{path:"/notes/:noteId",element:Object(s.jsx)(i,{notes:t})}),Object(s.jsx)(c.b,{path:"/",element:Object(s.jsx)(B,{})}),Object(s.jsx)(c.b,{path:"/notes",element:Object(s.jsx)(z,{})}),Object(s.jsx)(c.b,{path:"/users",element:Object(s.jsx)(V,{})}),Object(s.jsx)(c.b,{path:"/login",element:Object(s.jsx)(n,{})}),Object(s.jsx)(c.b,{path:"/*",element:Object(s.jsx)("h1",{children:"no disponible"})})]})]})};r.a.render(Object(s.jsx)(F,{}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.d0208165.chunk.js.map