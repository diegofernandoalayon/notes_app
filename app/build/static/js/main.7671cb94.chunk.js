(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{46:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(20),a=n.n(r),c=n(8),o=n(3),i=n(1),u=n(0),s=function(e){var t=e.message;return null===t?null:Object(u.jsx)("div",{className:"error",children:t})},l=Object(i.forwardRef)((function(e,t){var n=e.children,r=e.buttonLabel,a=Object(i.useState)(!1),c=Object(o.a)(a,2),s=c[0],l=c[1],j={display:s?"none":""},d={display:s?"":"none"},b=function(){return l(!s)};return Object(i.useImperativeHandle)(t,(function(){return{toggleVisibility:b}})),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:j,children:Object(u.jsx)("button",{className:"todo",onClick:b,children:r})}),Object(u.jsxs)("div",{style:d,children:[n,Object(u.jsx)("button",{onClick:b,children:"Cancel"})]})]})}));l.displayName="Toggleable";var j=l;function d(e){var t=e.addNote,n=Object(i.useState)(""),r=Object(o.a)(n,2),a=r[0],c=r[1],s=Object(i.useRef)();return Object(u.jsxs)(j,{buttonLabel:"New Note",ref:s,children:[Object(u.jsx)("h3",{children:"Create a new note"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({content:a,important:!1}),c(""),s.current.toggleVisibility()},children:[Object(u.jsx)("input",{type:"text",onChange:function(e){c(e.target.value)},value:a,placeholder:"Write your note content"}),Object(u.jsx)("button",{children:"Crear nota"})]})]})}var b=n(7),h=["content","important","toggleImportance"];function f(e){var t=e.content,n=e.important,r=e.toggleImportance,a=(Object(b.a)(e,h),n?"make not important":"make important");return Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:Object(u.jsx)("strong",{children:t})}),Object(u.jsx)("small",{children:Object(u.jsx)("strong",{children:String(n)})}),Object(u.jsx)("button",{onClick:r,children:a})]})}var O=n(4),p=n.n(O),g="/api/notes",m=null,v=function(){return p.a.get(g).then((function(e){return e.data}))},x=function(e){var t={headers:{Authorization:m}};return p.a.post(g,e,t).then((function(e){return e.data}))},w=function(e,t){var n={headers:{Authorization:m}};return p.a.put("".concat(g,"/").concat(e),t,n).then((function(e){return e.data}))},S=function(e){m="Bearer ".concat(e)},y=n(10),C=n.n(y),N=n(21),k=function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L={login:k},I=(n(46),n(11)),U=n.n(I),A=["username","password","handleLoginSubmit"];function J(e){var t=e.username,n=e.password,r=e.handleLoginSubmit,a=Object(b.a)(e,A);return Object(u.jsx)(j,{buttonLabel:"Show login",children:Object(u.jsxs)("form",{onSubmit:r,children:[Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"text",value:t,name:"Username",placeholder:"Username",onChange:a.handleUsernameChange})}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"password",value:n,name:"password",placeholder:"Password",onChange:a.handlePasswordChange})}),Object(u.jsx)("button",{id:"form-login-button",children:"Login"})]})})}J.prototypes={handleLoginSubmit:U.a.func.isRequired,username:U.a.string};var P=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(!1),l=Object(o.a)(a,2),j=l[0],b=l[1],h=Object(i.useState)(null),O=Object(o.a)(h,2),p=O[0],g=O[1],m=Object(i.useState)(""),y=Object(o.a)(m,2),C=y[0],N=y[1],k=Object(i.useState)(""),I=Object(o.a)(k,2),U=I[0],A=I[1],P=Object(i.useState)(null),E=Object(o.a)(P,2),R=E[0],z=E[1];Object(i.useEffect)((function(){b(!0),v().then((function(e){r(e),b(!1)}))}),[]),Object(i.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteAppUser");if(e){var t=JSON.parse(e);z(t),S(t.token)}}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Notes"}),j?"cargando...":"",Object(u.jsx)(s,{message:p}),R?Object(u.jsx)("button",{onClick:function(){window.localStorage.removeItem("loggedNoteAppUser"),z(null),S(R.token)},children:"Logout"}):null,R?Object(u.jsx)(d,{addNote:function(e){x(e).then((function(e){r((function(t){return t.concat(e)}))})).catch((function(e){console.error(e),g("La API fallo")}))}}):Object(u.jsx)(J,{username:C,password:U,handleLoginSubmit:function(e){e.preventDefault(),L.login({username:C,password:U}).then((function(e){window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(e)),S(e.token),z(e),N(""),A("")})).catch((function(){g("Wrong credentials"),N(""),A(""),setTimeout((function(){g(null)}),5e3)}))},handleUsernameChange:function(e){var t=e.target;return N(t.value)},handlePasswordChange:function(e){var t=e.target;return A(t.value)}}),Object(u.jsx)("ol",{children:n.map((function(e){return Object(u.jsx)(f,Object(c.a)({toggleImportance:function(){return function(e){var t=n.find((function(t){return t.id===e})),a=Object(c.a)(Object(c.a)({},t),{},{important:!t.important});w(e,a).then((function(t){r(n.map((function(n){return n.id!==e?n:t})))}))}(e.id)}},e),e.id)}))})]})};a.a.render(Object(u.jsx)(P,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.7671cb94.chunk.js.map