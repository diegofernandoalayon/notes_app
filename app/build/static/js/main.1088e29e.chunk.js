(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{78:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var r=n(18),c=n.n(r),o=n(6),a=n(19),s=n(1),i=function(e){var t,n=e.notes;console.log(n);var r=Object(o.h)().noteId;console.log(r);var c=n.find((function(e){return e.id===r}));return c?(console.log(c),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:c.content}),Object(s.jsx)("div",{children:null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.name}),Object(s.jsx)("div",{children:Object(s.jsx)("strong",{children:c.important?"important":"not important"})})]})):null},l=n(7),j=n(0),u=n(2),b=n(3),d=n(9),O=n.n(d),h=n(87),p=n(46),x=["username","password","handleLoginSubmit"];function f(e){var t=e.username,n=e.password,r=e.handleLoginSubmit;Object(b.a)(e,x);return Object(s.jsxs)(h.a,{onSubmit:r,children:[Object(s.jsx)(h.a.Group,{children:Object(s.jsx)(h.a.Control,Object(u.a)(Object(u.a)({},t),{},{name:"Username",placeholder:"Username"}))}),Object(s.jsx)(h.a.Group,{children:Object(s.jsx)(h.a.Control,Object(u.a)(Object(u.a)({},n),{},{name:"password",placeholder:"Password"}))}),Object(s.jsx)(p.a,{id:"form-login-button",onClick:r,children:"Login"})]})}f.prototypes={handleLoginSubmit:O.a.func.isRequired,username:O.a.string};var g=n(36),m=n.n(g),v=n(47),y=n(26),w=n.n(y),S=function(){var e=Object(v.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/login",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N={login:S},k="/api/notes",L=null,I=function(){return w.a.get(k).then((function(e){return e.data}))},C=function(e){var t={headers:{Authorization:L}};return w.a.post(k,e,t).then((function(e){return e.data}))},U=function(e,t){var n={headers:{Authorization:L}};return w.a.put("".concat(k,"/").concat(e),t,n).then((function(e){return e.data}))},A=function(e){L="Bearer ".concat(e)},J=function(e){var t=e.message;return null===t?null:Object(s.jsx)("div",{className:"error",children:t})},D=function(e){var t=e.type,n=Object(j.useState)(""),r=Object(l.a)(n,2),c=r[0],o=r[1];return{type:t,value:c,onChange:function(e){o(e.target.value)}}};function E(){var e=D({type:"text"}),t=D({type:"password"}),n=Object(o.g)(),r=Object(j.useState)(null),c=Object(l.a)(r,2),a=c[0],i=c[1],u=Object(j.useState)(null),b=Object(l.a)(u,2),d=b[0],O=b[1];return a?Object(s.jsx)("h2",{children:"user logged"}):Object(s.jsxs)("div",{children:[Object(s.jsx)(J,{message:d}),Object(s.jsx)(f,{username:e,password:t,handleLoginSubmit:function(r){r.preventDefault();var c=e.value,o=t.value;N.login({username:c,password:o}).then((function(e){console.log("paso aca"),window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(e)),A(e.token),i(e),n("/notes")})).catch((function(){O("Wrong credentials"),setTimeout((function(){O(null)}),5e3)}))}})]})}var H=Object(j.forwardRef)((function(e,t){var n=e.children,r=e.buttonLabel,c=Object(j.useState)(!1),o=Object(l.a)(c,2),a=o[0],i=o[1],u={display:a?"none":""},b={display:a?"":"none"},d=function(){return i(!a)};return Object(j.useImperativeHandle)(t,(function(){return{toggleVisibility:d}})),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{style:u,children:Object(s.jsx)("button",{className:"todo",onClick:d,children:r})}),Object(s.jsxs)("div",{style:b,children:[n,Object(s.jsx)("button",{onClick:d,children:"Cancel"})]})]})}));H.displayName="Toggleable";var P=H;function R(e){var t=e.addNote,n=Object(j.useState)(""),r=Object(l.a)(n,2),c=r[0],o=r[1],a=Object(j.useRef)();return Object(s.jsxs)(P,{buttonLabel:"New Note",ref:a,children:[Object(s.jsx)("h3",{children:"Create a new note"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({content:c,important:!1}),o(""),a.current.toggleVisibility()},children:[Object(s.jsx)("input",{type:"text",onChange:function(e){o(e.target.value)},value:c,placeholder:"Write your note content"}),Object(s.jsx)("button",{children:"Crear nota"})]})]})}var T=["content","important","toggleImportance"];function z(e){var t=e.content,n=e.important,r=e.toggleImportance,c=Object(b.a)(e,T),o=n?"make not important":"make important",i=n?"secondary":"primary";return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("td",{width:"50%",children:Object(s.jsx)(a.b,{to:"/notes/".concat(c.id),style:{textDecoration:"none"},children:t})}),Object(s.jsx)("td",{children:Object(s.jsx)(p.a,{onClick:r,variant:i,children:o})})]})}n(78);var B=function(){var e=Object(j.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1];Object(j.useEffect)((function(){I().then((function(e){r(e)}))}),[]);return{notes:n,addNote:function(e){return C(e).then((function(e){r((function(t){return t.concat(e)}))}))},setNotes:r,toggleImportanceOf:function(e){var t=n.find((function(t){return t.id===e})),c=Object(u.a)(Object(u.a)({},t),{},{important:!t.important});return U(e,c).then((function(t){r(n.map((function(n){return n.id!==e?n:t})))}))}}},G=function(){var e=Object(j.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1];Object(j.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteAppUser");if(e){var t=JSON.parse(e);r(t),A(t.token)}}),[]);return{user:n,logout:function(){window.localStorage.removeItem("loggedNoteAppUser"),r(null),A(n.token)},login:function(e){var t=e.username,n=e.password;return N.login({username:t,password:n}).then((function(e){window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(e)),A(e.token),r(e)}))}}},V=n(49),W=function(){var e=B(),t=e.notes,n=e.addNote,r=e.toggleImportanceOf,c=G(),o=c.user,a=c.logout,i=Object(j.useState)(null),b=Object(l.a)(i,2),d=b[0],O=b[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Notes"}),Object(s.jsx)(J,{message:d}),o?Object(s.jsx)("button",{onClick:a,children:"Logout"}):null,o?Object(s.jsx)(R,{addNote:function(e){n(e).catch((function(e){console.error(e),O("La API fallo")}))}}):Object(s.jsx)(E,{}),Object(s.jsx)(V.a,{striped:!0,children:Object(s.jsx)("tbody",{children:t.map((function(e){return Object(s.jsx)("tr",{children:Object(s.jsx)(z,Object(u.a)({toggleImportance:function(){return t=e.id,void r(t).catch((function(){O("Note was already removed from server")}));var t}},e))},e.id)}))})})]})},q=n(85),F=n(86),K=function(){return Object(s.jsx)("h1",{children:"Home Page"})},M=function(){return Object(s.jsx)("h1",{children:"Users"})},Q={padding:5},X=function(){var e=G().user,t=B().notes,n=function(){return e?Object(s.jsx)(o.a,{to:"/"}):Object(s.jsx)(E,{})};return Object(s.jsx)(a.a,{children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsxs)(q.a,{collapseOnSelect:!0,expand:"lg",children:[Object(s.jsx)(q.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(s.jsx)(q.a.Collapse,{children:Object(s.jsxs)(F.a,{children:[Object(s.jsx)(F.a.Link,{children:Object(s.jsx)(a.b,{to:"/",style:Q,children:"Home"})}),Object(s.jsx)(F.a.Link,{children:Object(s.jsx)(a.b,{to:"/notes",style:Q,children:"Notes"})}),Object(s.jsx)(F.a.Link,{children:Object(s.jsx)(a.b,{to:"/users",style:Q,children:"Users"})}),Object(s.jsx)(F.a.Link,{children:e?Object(s.jsxs)("em",{children:["Logged as ",e.name]}):Object(s.jsx)(a.b,{to:"/login",style:Q,children:"Login"})})]})})]}),Object(s.jsxs)(o.d,{children:[Object(s.jsx)(o.b,{path:"/notes/:noteId",element:Object(s.jsx)(i,{notes:t})}),Object(s.jsx)(o.b,{path:"/",element:Object(s.jsx)(K,{})}),Object(s.jsx)(o.b,{path:"/notes",element:Object(s.jsx)(W,{})}),Object(s.jsx)(o.b,{path:"/users",element:Object(s.jsx)(M,{})}),Object(s.jsx)(o.b,{path:"/login",element:Object(s.jsx)(n,{})}),Object(s.jsx)(o.b,{path:"/*",element:Object(s.jsx)("h1",{children:"no disponible"})})]})]})})};n(82);c.a.render(Object(s.jsx)(X,{}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.1088e29e.chunk.js.map