(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(24),c=n.n(r),o=n(2),a=n(6),s=n(0),i=function(e){var t,n=e.notes;console.log(n);var r=Object(o.h)().noteId;console.log(r);var c=n.find((function(e){return e.id===r}));return c?(console.log(c),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:c.content}),Object(s.jsx)("div",{children:null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.name}),Object(s.jsx)("div",{children:Object(s.jsx)("strong",{children:c.important?"important":"not important"})})]})):null},u=n(3),l=n(1),j=n(12),b=Object(l.forwardRef)((function(e,t){var n=e.children,r=e.buttonLabel,c=Object(l.useState)(!1),o=Object(u.a)(c,2),a=o[0],i=o[1],j={display:a?"none":""},b={display:a?"":"none"},d=function(){return i(!a)};return Object(l.useImperativeHandle)(t,(function(){return{toggleVisibility:d}})),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{style:j,children:Object(s.jsx)("button",{className:"todo",onClick:d,children:r})}),Object(s.jsxs)("div",{style:b,children:[n,Object(s.jsx)("button",{onClick:d,children:"Cancel"})]})]})}));b.displayName="Toggleable";var d=b,O=n(14),h=n.n(O),f=["username","password","handleLoginSubmit"];function g(e){var t=e.username,n=e.password,r=e.handleLoginSubmit,c=Object(j.a)(e,f);return Object(s.jsx)(d,{buttonLabel:"Show login",children:Object(s.jsxs)("form",{onSubmit:r,children:[Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",value:t,name:"Username",placeholder:"Username",onChange:c.handleUsernameChange})}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"password",value:n,name:"password",placeholder:"Password",onChange:c.handlePasswordChange})}),Object(s.jsx)("button",{id:"form-login-button",children:"Login"})]})})}g.prototypes={handleLoginSubmit:h.a.func.isRequired,username:h.a.string};var p=n(15),m=n.n(p),x=n(25),v=n(7),w=n.n(v),S=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/login",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N={login:S},y="/api/notes",C=null,I=function(){return w.a.get(y).then((function(e){return e.data}))},k=function(e){var t={headers:{Authorization:C}};return w.a.post(y,e,t).then((function(e){return e.data}))},L=function(e,t){var n={headers:{Authorization:C}};return w.a.put("".concat(y,"/").concat(e),t,n).then((function(e){return e.data}))},U=function(e){C="Bearer ".concat(e)},A=function(e){var t=e.message;return null===t?null:Object(s.jsx)("div",{className:"error",children:t})};function J(){var e=Object(o.g)(),t=Object(l.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1],a=Object(l.useState)(""),i=Object(u.a)(a,2),j=i[0],b=i[1],d=Object(l.useState)(null),O=Object(u.a)(d,2),h=O[0],f=O[1],p=Object(l.useState)(null),m=Object(u.a)(p,2),x=m[0],v=m[1];console.log(h);return h?Object(s.jsx)("h2",{children:"user logged"}):Object(s.jsxs)("div",{children:[Object(s.jsx)(A,{message:x}),Object(s.jsx)(g,{username:r,password:j,handleLoginSubmit:function(t){t.preventDefault(),N.login({username:r,password:j}).then((function(t){window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(t)),U(t.token),f(t),c(""),b(""),e("/notes")})).catch((function(){v("Wrong credentials"),c(""),b(""),setTimeout((function(){v(null)}),5e3)}))},handlePasswordChange:function(e){b(e.target.value)},handleUsernameChange:function(e){c(e.target.value)}})]})}var P=n(8);function E(e){var t=e.addNote,n=Object(l.useState)(""),r=Object(u.a)(n,2),c=r[0],o=r[1],a=Object(l.useRef)();return Object(s.jsxs)(d,{buttonLabel:"New Note",ref:a,children:[Object(s.jsx)("h3",{children:"Create a new note"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({content:c,important:!1}),o(""),a.current.toggleVisibility()},children:[Object(s.jsx)("input",{type:"text",onChange:function(e){o(e.target.value)},value:c,placeholder:"Write your note content"}),Object(s.jsx)("button",{children:"Crear nota"})]})]})}var D=["content","important","toggleImportance"];function H(e){var t=e.content,n=e.important,r=e.toggleImportance,c=Object(j.a)(e,D),o=n?"make not important":"make important";return Object(s.jsxs)("li",{children:[Object(s.jsx)(a.b,{to:"/notes/".concat(c.id),children:t}),Object(s.jsx)("small",{children:Object(s.jsx)("strong",{children:String(n)})}),Object(s.jsx)("button",{onClick:r,children:o})]})}n(52);var R=function(){var e=Object(l.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1];Object(l.useEffect)((function(){I().then((function(e){r(e)}))}),[]);return{notes:n,addNote:function(e){return k(e).then((function(e){r((function(t){return t.concat(e)}))}))},setNotes:r,toggleImportanceOf:function(e){var t=n.find((function(t){return t.id===e})),c=Object(P.a)(Object(P.a)({},t),{},{important:!t.important});return L(e,c).then((function(t){r(n.map((function(n){return n.id!==e?n:t})))}))}}},T=function(){var e=R(),t=e.notes,n=e.addNote,r=e.toggleImportanceOf,c=Object(l.useState)(null),o=Object(u.a)(c,2),a=o[0],i=o[1],j=Object(l.useState)(""),b=Object(u.a)(j,2),d=b[0],O=b[1],h=Object(l.useState)(""),f=Object(u.a)(h,2),p=f[0],m=f[1],x=Object(l.useState)(null),v=Object(u.a)(x,2),w=v[0],S=v[1];Object(l.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteAppUser");if(e){var t=JSON.parse(e);S(t),U(t.token)}}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Notes"}),Object(s.jsx)(A,{message:a}),w?Object(s.jsx)("button",{onClick:function(){window.localStorage.removeItem("loggedNoteAppUser"),S(null),U(w.token)},children:"Logout"}):null,w?Object(s.jsx)(E,{addNote:function(e){n(e).catch((function(e){console.error(e),i("La API fallo")}))}}):Object(s.jsx)(g,{username:d,password:p,handleLoginSubmit:function(e){e.preventDefault(),N.login({username:d,password:p}).then((function(e){window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(e)),U(e.token),S(e),O(""),m("")})).catch((function(){i("Wrong credentials"),O(""),m(""),setTimeout((function(){i(null)}),5e3)}))},handleUsernameChange:function(e){var t=e.target;return O(t.value)},handlePasswordChange:function(e){var t=e.target;return m(t.value)}}),Object(s.jsx)("ol",{children:t.map((function(e){return Object(s.jsx)(H,Object(P.a)({toggleImportance:function(){return t=e.id,void r(t).catch((function(){i("Note 'a' was already removed from server")}));var t}},e),e.id)}))})]})},W=function(){return Object(s.jsx)("h1",{children:"Home Page"})},z=function(){return Object(s.jsx)("h1",{children:"Users"})},B={padding:5},V=function(){var e=function(){var e=Object(l.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(l.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteAppUser");if(e){var t=JSON.parse(e);r(t),U(t.token)}}),[]),{user:n}}(),t=e.user,n=R().notes,r=function(){return t?Object(s.jsx)(o.a,{to:"/"}):Object(s.jsx)(J,{})};return Object(s.jsxs)(a.a,{children:[Object(s.jsxs)("header",{children:[Object(s.jsx)(a.b,{to:"/",style:B,children:"Home"}),Object(s.jsx)(a.b,{to:"/notes",style:B,children:"Notes"}),Object(s.jsx)(a.b,{to:"/users",style:B,children:"Users"}),t?Object(s.jsxs)("em",{children:["Logged as ",t.name]}):Object(s.jsx)(a.b,{to:"/login",style:B,children:"Login"})]}),Object(s.jsxs)(o.d,{children:[Object(s.jsx)(o.b,{path:"/notes/:noteId",element:Object(s.jsx)(i,{notes:n})}),Object(s.jsx)(o.b,{path:"/",element:Object(s.jsx)(W,{})}),Object(s.jsx)(o.b,{path:"/notes",element:Object(s.jsx)(T,{})}),Object(s.jsx)(o.b,{path:"/users",element:Object(s.jsx)(z,{})}),Object(s.jsx)(o.b,{path:"/login",element:Object(s.jsx)(r,{})}),Object(s.jsx)(o.b,{path:"/*",element:Object(s.jsx)("h1",{children:"no disponible"})})]})]})};c.a.render(Object(s.jsx)(V,{}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.51234f2c.chunk.js.map