(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{46:function(t,e,n){},49:function(t,e,n){"use strict";n.r(e);var r=n(20),a=n.n(r),c=n(8),o=n(3),i=n(1),u=n(0),s=function(t){var e=t.message;return null===e?null:Object(u.jsx)("div",{className:"error",children:e})},l=Object(i.forwardRef)((function(t,e){var n=t.children,r=t.buttonLabel,a=Object(i.useState)(!1),c=Object(o.a)(a,2),s=c[0],l=c[1],j={display:s?"none":""},d={display:s?"":"none"},b=function(){return l(!s)};return Object(i.useImperativeHandle)(e,(function(){return{toggleVisibility:b}})),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:j,children:Object(u.jsx)("button",{className:"todo",onClick:b,children:r})}),Object(u.jsxs)("div",{style:d,children:[n,Object(u.jsx)("button",{onClick:b,children:"Cancel"})]})]})}));l.displayName="Toggleable";var j=l;function d(t){var e=t.addNote,n=Object(i.useState)(""),r=Object(o.a)(n,2),a=r[0],c=r[1],s=Object(i.useRef)();return Object(u.jsxs)(j,{buttonLabel:"New Note",ref:s,children:[Object(u.jsx)("h3",{children:"Create a new note"}),Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e({content:a,important:!1}),c(""),s.current.toggleVisibility()},children:[Object(u.jsx)("input",{type:"text",onChange:function(t){c(t.target.value)},value:a,placeholder:"Write your note content"}),Object(u.jsx)("button",{children:"Crear nota"})]})]})}var b=n(7),h=["content","important","toggleImportance"];function p(t){var e=t.content,n=t.important,r=t.toggleImportance,a=(Object(b.a)(t,h),n?"make not important":"make important");return Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:Object(u.jsx)("strong",{children:e})}),Object(u.jsx)("small",{children:Object(u.jsx)("strong",{children:String(n)})}),Object(u.jsx)("button",{onClick:r,children:a})]})}var f=n(4),O=n.n(f),g="http://localhost:3001/api/notes",m=null,v=function(){return O.a.get(g).then((function(t){return t.data}))},x=function(t){var e={headers:{Authorization:m}};return O.a.post(g,t,e).then((function(t){return t.data}))},w=function(t,e){var n={headers:{Authorization:m}};return O.a.put("".concat(g,"/").concat(t),e,n).then((function(t){return t.data}))},S=function(t){m="Bearer ".concat(t)},y=n(10),C=n.n(y),N=n(21),k=function(){var t=Object(N.a)(C.a.mark((function t(e){var n,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("http://localhost:3001/api/login",e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L={login:k},I=(n(46),n(11)),U=n.n(I),A=["username","password","handleLoginSubmit"];function J(t){var e=t.username,n=t.password,r=t.handleLoginSubmit,a=Object(b.a)(t,A);return Object(u.jsx)(j,{buttonLabel:"Show login",children:Object(u.jsxs)("form",{onSubmit:r,children:[Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"text",value:e,name:"Username",placeholder:"Username",onChange:a.handleUsernameChange})}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"password",value:n,name:"password",placeholder:"Password",onChange:a.handlePasswordChange})}),Object(u.jsx)("button",{id:"form-login-button",children:"Login"})]})})}J.prototypes={handleLoginSubmit:U.a.func.isRequired,username:U.a.string};var P=function(){var t=Object(i.useState)([]),e=Object(o.a)(t,2),n=e[0],r=e[1],a=Object(i.useState)(!1),l=Object(o.a)(a,2),j=l[0],b=l[1],h=Object(i.useState)(null),f=Object(o.a)(h,2),O=f[0],g=f[1],m=Object(i.useState)(""),y=Object(o.a)(m,2),C=y[0],N=y[1],k=Object(i.useState)(""),I=Object(o.a)(k,2),U=I[0],A=I[1],P=Object(i.useState)(null),E=Object(o.a)(P,2),R=E[0],z=E[1];Object(i.useEffect)((function(){b(!0),v().then((function(t){r(t),b(!1)}))}),[]),Object(i.useEffect)((function(){var t=window.localStorage.getItem("loggedNoteAppUser");if(t){var e=JSON.parse(t);z(e),S(e.token)}}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Notes"}),j?"cargando...":"",Object(u.jsx)(s,{message:O}),R?Object(u.jsx)("button",{onClick:function(){window.localStorage.removeItem("loggedNoteAppUser"),z(null),S(R.token)},children:"Logout"}):null,R?Object(u.jsx)(d,{addNote:function(t){x(t).then((function(t){r((function(e){return e.concat(t)}))})).catch((function(t){console.error(t),g("La API fallo")}))}}):Object(u.jsx)(J,{username:C,password:U,handleLoginSubmit:function(t){t.preventDefault(),L.login({username:C,password:U}).then((function(t){window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(t)),S(t.token),z(t),N(""),A("")})).catch((function(){g("Wrong credentials"),N(""),A(""),setTimeout((function(){g(null)}),5e3)}))},handleUsernameChange:function(t){var e=t.target;return N(e.value)},handlePasswordChange:function(t){var e=t.target;return A(e.value)}}),Object(u.jsx)("ol",{children:n.map((function(t){return Object(u.jsx)(p,Object(c.a)({toggleImportance:function(){return function(t){var e=n.find((function(e){return e.id===t})),a=Object(c.a)(Object(c.a)({},e),{},{important:!e.important});w(t,a).then((function(e){r(n.map((function(n){return n.id!==t?n:e})))}))}(t.id)}},t),t.id)}))})]})};a.a.render(Object(u.jsx)(P,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.6fca9425.chunk.js.map